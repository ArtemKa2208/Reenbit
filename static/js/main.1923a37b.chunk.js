(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{20:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},30:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(8),s=a.n(n),r=(a(20),a(3)),o=(a(27),a(28),a(2)),i=a.n(o),u=a(5),j=(a(30),a(35)),l=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://my-json-server.typicode.com/ArtemKa2208/Reenbit/chats");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d="LOAD_CHATS",m="LOAD_MESSAGES",b="SET_SEARCH",h="SET_SELECTED_CHAT_ID",f=function(e){return{type:m,payload:e}},p=function(e){return e.chats},O=function(e){return e.selectedChatId},v=function(e){return e.messages},_=function(e){return e.search},x=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://my-json-server.typicode.com/ArtemKa2208/Reenbit/messages");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.chucknorris.io/jokes/random");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=a(1),N=function(){var e=Object(r.b)(),t=Object(r.c)(p),a=Object(r.c)(v),n=Object(r.c)(_);Object(c.useEffect)((function(){(function(){var t=Object(u.a)(i.a.mark((function t(){var a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:return a=t.sent,t.next=5,x();case 5:c=t.sent,e(f(c)),e({type:d,payload:a});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var s=function(t){e({type:h,payload:t})},o=function(e,t){var c=a.filter((function(t){return t.chatId===e})),n=c.length;if("message"===t)return c.length?c[n-1].body||"":"Say hello";if(!c.length)return"";var s=new Date(c[n-1].date);return Object(j.a)(s,"MMM d, yyyy")},m=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return Object(y.jsxs)("div",{className:"chats",children:[Object(y.jsx)("p",{className:"chats__title",children:"Chats"}),m.map((function(e){return Object(y.jsxs)("div",{className:"chats__chat chat",role:"button","aria-hidden":"true",onClick:function(){return s(e.id)},children:[Object(y.jsx)("img",{src:e.photo,alt:"avatar",className:"chat__img"}),Object(y.jsxs)("div",{className:"chat__info",children:[Object(y.jsxs)("div",{className:"chat__date-name",children:[Object(y.jsx)("p",{children:e.name}),Object(y.jsx)("p",{className:"chat__date",children:o(e.id,"date")})]}),Object(y.jsx)("p",{className:"chat__message",children:o(e.id,"message")})]})]},e.id)}))]})},w=a(10),k=(a(32),function(){var e=Object(c.useState)(""),t=Object(w.a)(e,2),a=t[0],n=t[1],s=Object(r.b)();return Object(y.jsxs)("div",{className:"search",children:[Object(y.jsx)("img",{src:"./images/koala.jpg",alt:"avatar",className:"search__avatar"}),Object(y.jsx)("input",{type:"text",className:"search__input",placeholder:"Search or start new chat",onChange:function(e){var t;n(e.target.value),s((t=e.target.value,{type:b,payload:t}))},value:a})]})}),C=a(6),D=(a(33),function(e){var t=e.message;return Object(y.jsx)("div",{className:"message-from-me",children:Object(y.jsxs)("div",{className:"message-from-me__info",children:[Object(y.jsx)("p",{className:"message-from-me__text",children:t.body}),Object(y.jsx)("p",{className:"message-from-me__date",children:"".concat(t.date,", ").concat(t.time)})]})})}),S=function(e){var t=e.message,a=e.photo;return Object(y.jsxs)("div",{className:"message-to-me",children:[Object(y.jsxs)("div",{className:"message-to-me__info",children:[Object(y.jsx)("img",{src:a,alt:"avatar",className:"message-to-me__avatar"}),Object(y.jsx)("p",{className:"message-to-me__text",children:t.body})]}),Object(y.jsx)("p",{className:"message-to-me__date",children:"".concat(t.date,", ").concat(t.time)})]})},E=function(){var e=Object(r.b)(),t=Object(r.c)(O),a=Object(r.c)(p),n=Object(r.c)(v),s=Object(c.useState)(""),o=Object(w.a)(s,2),l=o[0],d=o[1],m=Object(c.useRef)(null),b=a.find((function(e){return e.id===t})),h=n.filter((function(e){return e.chatId===t})),_=function(){var a=Object(u.a)(i.a.mark((function a(){var c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c={body:l,date:Object(j.a)(new Date,"M/d/yy"),time:Object(j.a)(new Date,"h:mm aa"),fullDate:+new Date,direction:"from_me",chatId:t},d(""),e(f([].concat(Object(C.a)(n),[c]))),setTimeout(Object(u.a)(i.a.mark((function a(){var c,s;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g();case 2:c=a.sent,s={body:c.value,date:Object(j.a)(new Date,"M/d/yy"),time:Object(j.a)(new Date,"h:mm aa"),fullDate:+new Date,direction:"to_me",chatId:t},e(f([].concat(Object(C.a)(n),[s])));case 5:case"end":return a.stop()}}),a)}))),1e4);case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e,t;m&&(null===(e=m.current)||void 0===e||e.scrollTo(0,null===(t=m.current)||void 0===t?void 0:t.scrollHeight))})),Object(y.jsxs)("div",{className:"messages",children:[Object(y.jsxs)("div",{className:"messages__header",children:[Object(y.jsx)("img",{src:null===b||void 0===b?void 0:b.photo,alt:"avatar",className:"messages__header-avatar"}),Object(y.jsx)("p",{className:"messages__header-name",children:null===b||void 0===b?void 0:b.name})]}),Object(y.jsx)("div",{className:"messages__content",ref:m,children:h.map((function(e){return"from_me"===e.direction?Object(y.jsx)(D,{message:e}):Object(y.jsx)(S,{message:e,photo:null===b||void 0===b?void 0:b.photo})}))}),Object(y.jsx)("div",{className:"messages__footer",children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault()},className:"messages__footer-form",action:"",children:[Object(y.jsx)("input",{className:"messages__footer-input",type:"text",placeholder:"Type your message",value:l,onChange:function(e){d(e.target.value)}}),Object(y.jsx)("button",{className:"messages__footer-button",type:"button",onClick:_})]})})]})},I=function(){return Object(y.jsxs)("div",{className:"app",children:[Object(y.jsxs)("div",{className:"app__sidebar",children:[Object(y.jsx)(k,{}),Object(y.jsx)(N,{})]}),Object(y.jsx)(E,{})]})},A=a(4),T=a(14),M={chats:[],messages:[],selectedChatId:1,search:""},L=Object(T.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(A.a)(Object(A.a)({},e),{},{chats:Object(C.a)(t.payload)});case h:return Object(A.a)(Object(A.a)({},e),{},{selectedChatId:t.payload});case m:return Object(A.a)(Object(A.a)({},e),{},{messages:Object(C.a)(t.payload)});case b:return Object(A.a)(Object(A.a)({},e),{},{search:t.payload});default:return e}})),H=function(){return Object(y.jsx)(r.a,{store:L,children:Object(y.jsx)(I,{})})};s.a.render(Object(y.jsx)(H,{}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.1923a37b.chunk.js.map